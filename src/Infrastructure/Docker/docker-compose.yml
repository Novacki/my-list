version: '3.4'

services:
  #Database
  sqldata:
    container_name: sqldata
    networks:
      - default
    image: mcr.microsoft.com/mssql/server:2017-latest

  #Identity
  identity-api:
    container_name: identity
    networks:
      - default
    depends_on:
      - sqldata
    image: ${DOCKER_REGISTRY-}identityapi
    build:
      context: ./../../../
      dockerfile: ./src/Server/Services/Identity/Identity.API/Dockerfile

  #PurchaseList
  purchaseList-api:
    container_name: purchase-list
    image: ${DOCKER_REGISTRY-}purchaselistapi
    depends_on:
      - sqldata
    build:
      context: ./../../../
      dockerfile: ./src/Server/Services/PurchaseList/PurchaseList.API/Dockerfile

networks: 
  default:
    driver: bridge 